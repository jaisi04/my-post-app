{"ast":null,"code":"var _jsxFileName = \"/Users/prince.kumar/Downloads/my-post-app/src/components/Posts/index.js\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport PostsComponent from \"./Posts\";\n\nclass Posts extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      posts: [],\n      page: 1,\n      rows: 10,\n      filterKey: \"\",\n      error: \"\"\n    };\n    this.updateField = this.updateField.bind(this);\n    this.getPosts = this.getPosts.bind(this);\n    this.updatePage = this.updatePage.bind(this);\n  }\n\n  componentDidMount() {\n    this.getPosts();\n  }\n\n  updateField(e) {\n    e.preventDefault();\n    this.setState({\n      filterKey: e.target.value\n    }, () => this.getPosts());\n  }\n\n  updatePage(e) {\n    e.preventDefault();\n    this.setState({\n      page: e.target.value\n    }, () => this.getPosts());\n  }\n\n  getPosts() {\n    const {\n      page,\n      rows,\n      filterKey\n    } = this.state;\n    this.setState({\n      btnDisabled: true\n    });\n    axios.get(`http://localhost:8080/posts?pageNo=${page || 1}&pageSize=${rows}&title=${filterKey}`, {\n      headers: {\n        Authorization: `Bearer ${this.props.token}`\n      }\n    }).then(res => {\n      console.log(res);\n      const N = 5;\n      const rows = [...Array(res.data.totalNoPages || 1).keys()].map(x => ++x);\n      this.setState({\n        posts: res.data.post || [],\n        page: res.data.currentPage\n      });\n    }).catch(err => {\n      this.setState({\n        error: \"Something went wrong\"\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(PostsComponent, Object.assign({\n      updatePage: this.updatePage,\n      updateField: this.updateField\n    }, this.state, this.props, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 7\n      }\n    }));\n  }\n\n}\n\nexport default Posts;","map":{"version":3,"sources":["/Users/prince.kumar/Downloads/my-post-app/src/components/Posts/index.js"],"names":["React","axios","PostsComponent","Posts","Component","constructor","props","state","posts","page","rows","filterKey","error","updateField","bind","getPosts","updatePage","componentDidMount","e","preventDefault","setState","target","value","btnDisabled","get","headers","Authorization","token","then","res","console","log","N","Array","data","totalNoPages","keys","map","x","post","currentPage","catch","err","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,cAAP,MAA2B,SAA3B;;AAEA,MAAMC,KAAN,SAAoBH,KAAK,CAACI,SAA1B,CAAoC;AAClCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,KAAK,EAAE,EADI;AAEXC,MAAAA,IAAI,EAAE,CAFK;AAGXC,MAAAA,IAAI,EAAE,EAHK;AAIXC,MAAAA,SAAS,EAAE,EAJA;AAKXC,MAAAA,KAAK,EAAE;AALI,KAAb;AAOA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKC,QAAL,GAAgB,KAAKA,QAAL,CAAcD,IAAd,CAAmB,IAAnB,CAAhB;AACA,SAAKE,UAAL,GAAkB,KAAKA,UAAL,CAAgBF,IAAhB,CAAqB,IAArB,CAAlB;AACD;;AAEDG,EAAAA,iBAAiB,GAAG;AAClB,SAAKF,QAAL;AACD;;AAEDF,EAAAA,WAAW,CAACK,CAAD,EAAI;AACbA,IAAAA,CAAC,CAACC,cAAF;AACA,SAAKC,QAAL,CAAc;AAAET,MAAAA,SAAS,EAAEO,CAAC,CAACG,MAAF,CAASC;AAAtB,KAAd,EAA6C,MAAM,KAAKP,QAAL,EAAnD;AACD;;AAEDC,EAAAA,UAAU,CAACE,CAAD,EAAI;AACZA,IAAAA,CAAC,CAACC,cAAF;AACA,SAAKC,QAAL,CAAc;AAAEX,MAAAA,IAAI,EAAES,CAAC,CAACG,MAAF,CAASC;AAAjB,KAAd,EAAwC,MAAM,KAAKP,QAAL,EAA9C;AACD;;AAEDA,EAAAA,QAAQ,GAAG;AACT,UAAM;AAAEN,MAAAA,IAAF;AAAQC,MAAAA,IAAR;AAAcC,MAAAA;AAAd,QAA4B,KAAKJ,KAAvC;AACA,SAAKa,QAAL,CAAc;AAAEG,MAAAA,WAAW,EAAE;AAAf,KAAd;AACAtB,IAAAA,KAAK,CACFuB,GADH,CAEK,sCAAqCf,IAAI,IACxC,CAAE,aAAYC,IAAK,UAASC,SAAU,EAH5C,EAII;AACEc,MAAAA,OAAO,EAAE;AAAEC,QAAAA,aAAa,EAAG,UAAS,KAAKpB,KAAL,CAAWqB,KAAM;AAA5C;AADX,KAJJ,EAQGC,IARH,CAQQC,GAAG,IAAI;AACXC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACA,YAAMG,CAAC,GAAG,CAAV;AACA,YAAMtB,IAAI,GAAG,CAAC,GAAGuB,KAAK,CAACJ,GAAG,CAACK,IAAJ,CAASC,YAAT,IAAuB,CAAxB,CAAL,CAAgCC,IAAhC,EAAJ,EAA4CC,GAA5C,CAAgDC,CAAC,IAAI,EAAEA,CAAvD,CAAb;AACA,WAAKlB,QAAL,CAAc;AACZZ,QAAAA,KAAK,EAAEqB,GAAG,CAACK,IAAJ,CAASK,IAAT,IAAiB,EADZ;AAEZ9B,QAAAA,IAAI,EAAEoB,GAAG,CAACK,IAAJ,CAASM;AAFH,OAAd;AAID,KAhBH,EAiBGC,KAjBH,CAiBSC,GAAG,IAAI;AACZ,WAAKtB,QAAL,CAAc;AAAER,QAAAA,KAAK,EAAE;AAAT,OAAd;AACD,KAnBH;AAoBD;;AAED+B,EAAAA,MAAM,GAAG;AACP,wBACE,oBAAC,cAAD;AACE,MAAA,UAAU,EAAE,KAAK3B,UADnB;AAEE,MAAA,WAAW,EAAE,KAAKH;AAFpB,OAGM,KAAKN,KAHX,EAIM,KAAKD,KAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADF;AAQD;;AA/DiC;;AAkEpC,eAAeH,KAAf","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nimport PostsComponent from \"./Posts\";\n\nclass Posts extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      posts: [],\n      page: 1,\n      rows: 10,\n      filterKey: \"\",\n      error: \"\"\n    };\n    this.updateField = this.updateField.bind(this);\n    this.getPosts = this.getPosts.bind(this);\n    this.updatePage = this.updatePage.bind(this);\n  }\n\n  componentDidMount() {\n    this.getPosts();\n  }\n\n  updateField(e) {\n    e.preventDefault();\n    this.setState({ filterKey: e.target.value }, () => this.getPosts());\n  }\n\n  updatePage(e) {\n    e.preventDefault();\n    this.setState({ page: e.target.value }, () => this.getPosts());\n  }\n\n  getPosts() {\n    const { page, rows, filterKey } = this.state;\n    this.setState({ btnDisabled: true });\n    axios\n      .get(\n        `http://localhost:8080/posts?pageNo=${page ||\n          1}&pageSize=${rows}&title=${filterKey}`,\n        {\n          headers: { Authorization: `Bearer ${this.props.token}` }\n        }\n      )\n      .then(res => {\n        console.log(res);\n        const N = 5;\n        const rows = [...Array(res.data.totalNoPages||1).keys()].map(x => ++x);\n        this.setState({\n          posts: res.data.post || [],\n          page: res.data.currentPage\n        });\n      })\n      .catch(err => {\n        this.setState({ error: \"Something went wrong\" });\n      });\n  }\n\n  render() {\n    return (\n      <PostsComponent\n        updatePage={this.updatePage}\n        updateField={this.updateField}\n        {...this.state}\n        {...this.props}\n      />\n    );\n  }\n}\n\nexport default Posts;\n"]},"metadata":{},"sourceType":"module"}